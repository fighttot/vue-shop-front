import{p as C,m as Y,a as z,g as w,u as N,c as a,b as oe,d as ne,e as Q,f as W,h as Z,t as R,i as se,j as re,k as ee,l as ie,n as ue,s as _,o as f,q as ce,V as de,r as U,v as $,w as ve,x as X,y as me,z as H,A as ge,B as fe,C as be,D as he,E as ye,F as Ve,G as Se,H as E,I as xe,J as ke,K as M,L as Be,M as Te,N as _e,O as Ce,P as we,Q as Ne,R as pe,S as Pe,T as Le,U as Ae,W as Ie,X as F,Y as Re,Z as Ee,_ as $e,$ as He,a0 as g,a1 as L,a2 as x,a3 as d,a4 as k,a5 as A,a6 as q,a7 as D,a8 as O,a9 as j,aa as I,ab as De,ac as Me,ad as Ue,ae as G}from"./index-5eb1b7e5.js";import{V as Fe,a as Ye}from"./VNavigationDrawer-882b325a.js";import{V as ze}from"./VContainer-bdb1eeae.js";const te=C({text:String,...Y(),...z()},"VToolbarTitle"),ae=w()({name:"VToolbarTitle",props:te(),setup(e,l){let{slots:t}=l;return N(()=>{const u=!!(t.default||t.text||e.text);return a(e.tag,{class:["v-toolbar-title",e.class],style:e.style},{default:()=>{var r;return[u&&a("div",{class:"v-toolbar-title__placeholder"},[t.text?t.text():e.text,(r=t.default)==null?void 0:r.call(t)])]}})}),{}}}),Xe=[null,"prominent","default","comfortable","compact"],le=C({absolute:Boolean,collapse:Boolean,color:String,density:{type:String,default:"default",validator:e=>Xe.includes(e)},extended:Boolean,extensionHeight:{type:[Number,String],default:48},flat:Boolean,floating:Boolean,height:{type:[Number,String],default:64},image:String,title:String,...oe(),...Y(),...ne(),...Q(),...z({tag:"header"}),...W()},"VToolbar"),J=w()({name:"VToolbar",props:le(),setup(e,l){var c;let{slots:t}=l;const{backgroundColorClasses:u,backgroundColorStyles:r}=Z(R(e,"color")),{borderClasses:o}=se(e),{elevationClasses:b}=re(e),{roundedClasses:v}=ee(e),{themeClasses:h}=ie(e),{rtlClasses:m}=ue(),s=_(!!(e.extended||(c=t.extension)!=null&&c.call(t))),n=f(()=>parseInt(Number(e.height)+(e.density==="prominent"?Number(e.height):0)-(e.density==="comfortable"?8:0)-(e.density==="compact"?16:0),10)),y=f(()=>s.value?parseInt(Number(e.extensionHeight)+(e.density==="prominent"?Number(e.extensionHeight):0)-(e.density==="comfortable"?4:0)-(e.density==="compact"?8:0),10):0);return ce({VBtn:{variant:"text"}}),N(()=>{var i;const V=!!(e.title||t.title),S=!!(t.image||e.image),B=(i=t.extension)==null?void 0:i.call(t);return s.value=!!(e.extended||B),a(e.tag,{class:["v-toolbar",{"v-toolbar--absolute":e.absolute,"v-toolbar--collapse":e.collapse,"v-toolbar--flat":e.flat,"v-toolbar--floating":e.floating,[`v-toolbar--density-${e.density}`]:!0},u.value,o.value,b.value,v.value,h.value,m.value,e.class],style:[r.value,e.style]},{default:()=>[S&&a("div",{key:"image",class:"v-toolbar__image"},[t.image?a(U,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{cover:!0,src:e.image}}},t.image):a(de,{key:"image-img",cover:!0,src:e.image},null)]),a(U,{defaults:{VTabs:{height:$(n.value)}}},{default:()=>{var T,p,P;return[a("div",{class:"v-toolbar__content",style:{height:$(n.value)}},[t.prepend&&a("div",{class:"v-toolbar__prepend"},[(T=t.prepend)==null?void 0:T.call(t)]),V&&a(ae,{key:"title",text:e.title},{text:t.title}),(p=t.default)==null?void 0:p.call(t),t.append&&a("div",{class:"v-toolbar__append"},[(P=t.append)==null?void 0:P.call(t)])])]}}),a(U,{defaults:{VTabs:{height:$(y.value)}}},{default:()=>[a(ve,null,{default:()=>[s.value&&a("div",{class:"v-toolbar__extension",style:{height:$(y.value)}},[B])]})]})]})}),{contentHeight:n,extensionHeight:y}}}),qe=C({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Oe(e){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:t}=l;let u=0;const r=X(null),o=_(0),b=_(0),v=_(0),h=_(!1),m=_(!1),s=f(()=>Number(e.scrollThreshold)),n=f(()=>me((s.value-o.value)/s.value||0)),y=()=>{const c=r.value;!c||t&&!t.value||(u=o.value,o.value="window"in c?c.pageYOffset:c.scrollTop,m.value=o.value<u,v.value=Math.abs(o.value-s.value))};return H(m,()=>{b.value=b.value||o.value}),H(h,()=>{b.value=0}),ge(()=>{H(()=>e.scrollTarget,c=>{var S;const V=c?document.querySelector(c):window;V&&V!==r.value&&((S=r.value)==null||S.removeEventListener("scroll",y),r.value=V,r.value.addEventListener("scroll",y,{passive:!0}))},{immediate:!0})}),fe(()=>{var c;(c=r.value)==null||c.removeEventListener("scroll",y)}),t&&H(t,y,{immediate:!0}),{scrollThreshold:s,currentScroll:o,currentThreshold:v,isScrollActive:h,scrollRatio:n,isScrollingUp:m,savedScroll:b}}const je=C({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:e=>["top","bottom"].includes(e)},...le(),...be(),...qe(),height:{type:[Number,String],default:64}},"VAppBar"),Ge=w()({name:"VAppBar",props:je(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:t}=l;const u=X(),r=he(e,"modelValue"),o=f(()=>{var T;const i=new Set(((T=e.scrollBehavior)==null?void 0:T.split(" "))??[]);return{hide:i.has("hide"),inverted:i.has("inverted"),collapse:i.has("collapse"),elevate:i.has("elevate"),fadeImage:i.has("fade-image")}}),b=f(()=>{const i=o.value;return i.hide||i.inverted||i.collapse||i.elevate||i.fadeImage||!r.value}),{currentScroll:v,scrollThreshold:h,isScrollingUp:m,scrollRatio:s}=Oe(e,{canScroll:b}),n=f(()=>e.collapse||o.value.collapse&&(o.value.inverted?s.value>0:s.value===0)),y=f(()=>e.flat||o.value.elevate&&(o.value.inverted?v.value>0:v.value===0)),c=f(()=>o.value.fadeImage?o.value.inverted?1-s.value:s.value:void 0),V=f(()=>{var p,P;if(o.value.hide&&o.value.inverted)return 0;const i=((p=u.value)==null?void 0:p.contentHeight)??0,T=((P=u.value)==null?void 0:P.extensionHeight)??0;return i+T});ye(f(()=>!!e.scrollBehavior),()=>{xe(()=>{o.value.hide?o.value.inverted?r.value=v.value>h.value:r.value=m.value||v.value<h.value:r.value=!0})});const{ssrBootStyles:S}=Ve(),{layoutItemStyles:B}=Se({id:e.name,order:f(()=>parseInt(e.order,10)),position:R(e,"location"),layoutSize:V,elementSize:_(void 0),active:r,absolute:R(e,"absolute")});return N(()=>{const[i]=J.filterProps(e);return a(J,E({ref:u,class:["v-app-bar",{"v-app-bar--bottom":e.location==="bottom"},e.class],style:[{...B.value,"--v-toolbar-image-opacity":c.value,height:void 0,...S.value},e.style]},i,{collapse:n.value,flat:y.value}),t)}),{}}}),Je=C({...ke({icon:"$menu",variant:"text"})},"VAppBarNavIcon"),Ke=w()({name:"VAppBarNavIcon",props:Je(),setup(e,l){let{slots:t}=l;return N(()=>a(M,E(e,{class:["v-app-bar-nav-icon"]}),t)),{}}}),Qe=w()({name:"VAppBarTitle",props:te(),setup(e,l){let{slots:t}=l;return N(()=>a(ae,E(e,{class:"v-app-bar-title"}),t)),{}}});const We=C({bordered:Boolean,color:String,content:[Number,String],dot:Boolean,floating:Boolean,icon:Be,inline:Boolean,label:{type:String,default:"$vuetify.badge"},max:[Number,String],modelValue:{type:Boolean,default:!0},offsetX:[Number,String],offsetY:[Number,String],textColor:String,...Y(),...Te({location:"top end"}),...Q(),...z(),...W(),..._e({transition:"scale-rotate-transition"})},"VBadge"),K=w()({name:"VBadge",inheritAttrs:!1,props:We(),setup(e,l){const{backgroundColorClasses:t,backgroundColorStyles:u}=Z(R(e,"color")),{roundedClasses:r}=ee(e),{t:o}=Ce(),{textColorClasses:b,textColorStyles:v}=we(R(e,"textColor")),{themeClasses:h}=Ne(),{locationStyles:m}=pe(e,!0,s=>(e.floating?e.dot?2:4:e.dot?8:12)+(["top","bottom"].includes(s)?+(e.offsetY??0):["left","right"].includes(s)?+(e.offsetX??0):0));return N(()=>{const s=Number(e.content),n=!e.max||isNaN(s)?e.content:s<=+e.max?s:`${e.max}+`,[y,c]=Pe(l.attrs,["aria-atomic","aria-label","aria-live","role","title"]);return a(e.tag,E({class:["v-badge",{"v-badge--bordered":e.bordered,"v-badge--dot":e.dot,"v-badge--floating":e.floating,"v-badge--inline":e.inline},e.class]},c,{style:e.style}),{default:()=>{var V,S;return[a("div",{class:"v-badge__wrapper"},[(S=(V=l.slots).default)==null?void 0:S.call(V),a(Le,{transition:e.transition},{default:()=>{var B,i;return[Ae(a("span",E({class:["v-badge__badge",h.value,t.value,r.value,b.value],style:[u.value,v.value,e.inline?{}:m.value],"aria-atomic":"true","aria-label":o(e.label,s),"aria-live":"polite",role:"status"},y),[e.dot?void 0:l.slots.badge?(i=(B=l.slots).badge)==null?void 0:i.call(B):e.icon?a(F,{icon:e.icon},null):n]),[[Ie,e.modelValue]])]}})])]}})}),{}}}),at={__name:"FrontLayout",setup(e){const l=Re(),{mobile:t}=Ee(),u=f(()=>t.value),r=$e(),o=X(!1),b=f(()=>[{to:"/register",text:"註冊",icon:"mdi-account-plus",show:!l.isLogin},{to:"/login",text:"登入",icon:"mdi-login",show:!l.isLogin},{to:"/cart",text:"購物車",icon:"mdi-cart",show:l.isLogin},{to:"/orders",text:"訂單",icon:"mdi-format-list-numbered",show:l.isLogin},{to:"/admin",text:"管理",icon:"mdi-cog",show:l.isLogin&&l.isAdmin}]),v=async()=>{try{await Ue.delete("/users/logout"),l.logout(),r({text:"登出成功",showCloseButton:!1,snackbarProps:{timeout:2e3,color:"green",location:"bottom"}})}catch(h){r({text:h.response.data.message,showCloseButton:!1,snackbarProps:{timeout:2e3,color:"red",location:"bottom"}})}};return(h,m)=>{const s=He("RouterView");return g(),L(A,null,[u.value?(g(),x(Fe,{key:0,modelValue:o.value,"onUpdate:modelValue":m[0]||(m[0]=n=>o.value=n),location:"right",temporary:""},{default:d(()=>[a(De,{nav:""},{default:d(()=>[(g(!0),L(A,null,q(b.value,n=>(g(),L(A,{key:n.to},[n.show?(g(),x(O,{key:0,to:n.to},{prepend:d(()=>[a(F,{icon:n.icon},null,8,["icon"])]),append:d(()=>[n.to==="/cart"?(g(),x(K,{key:0,color:"success",content:D(l).cart.toString()},null,8,["content"])):k("",!0)]),default:d(()=>[a(j,null,{default:d(()=>[I(G(n.text),1)]),_:2},1024)]),_:2},1032,["to"])):k("",!0)],64))),128)),D(l).isLogin?(g(),x(O,{key:0,onClick:v},{prepend:d(()=>[a(F,{icon:"mdi-logout"}),a(j,null,{default:d(()=>[I("登出")]),_:1})]),_:1})):k("",!0)]),_:1})]),_:1},8,["modelValue"])):k("",!0),a(Ge,{color:"primary"},{default:d(()=>[a(ze,{class:"d-flex align-center"},{default:d(()=>[a(M,{to:"/",variant:"text",active:!1},{default:d(()=>[a(Qe,null,{default:d(()=>[I("購物網")]),_:1})]),_:1}),a(Me),u.value?(g(),x(Ke,{key:0,onClick:m[1]||(m[1]=n=>o.value=!o.value)})):k("",!0),u.value?k("",!0):(g(!0),L(A,{key:1},q(b.value,n=>(g(),L(A,{key:n.to},[n.show?(g(),x(M,{key:0,variant:"text","prepend-icon":n.icon,to:n.to},{default:d(()=>[I(G(n.text)+" ",1),n.to==="/cart"?(g(),x(K,{key:0,color:"success",content:D(l).cart.toString(),floating:""},null,8,["content"])):k("",!0)]),_:2},1032,["prepend-icon","to"])):k("",!0)],64))),128)),!u.value&&D(l).isLogin?(g(),x(M,{key:2,variant:"text","prepend-icon":"mdi-logout",onClick:v},{default:d(()=>[I("登出")]),_:1})):k("",!0)]),_:1})]),_:1}),a(Ye,null,{default:d(()=>[(g(),x(s,{key:h.$route.path}))]),_:1})],64)}}};export{at as default};
